<div class="available-brews">
  <% @brews.each do |brew| %>
    <div class="brew <%= brew.slug %>" data-name="<%= brew.name %>" data-slug="<%= brew.slug %>">
      <div class="name">
        <%= brew.name %>
      </div>
      <div class="details">
        <%= link_to "More Details", "#" %>
      </div>
      <a href="#" class="add-to-queue">
        Add to Queue
      </a>
    </div>
  <% end %>
</div>

<div class="brew-queue">
  <div class="getting-started">
    Get started by adding brews you’d like to receive for the next couple months.
  </div>

  <div class="empty-queue">
    If your queue is ever empty, don’t worry! We’ll select a brew for you
    that we know you’ll love based on your previous ratings.
  </div>
</div>

<% content_for :scripts do %>
  <script>

    function addBrew () {
      var brew = $(this).parent();

      $('.getting-started').remove();
      $('.brew-queue').prepend(
        '<div class="brew ' + brew.data('slug') + '">'
        + brew.data('name')
        + '<a href="#" class="remove-from-queue">Remove from Queue</a>' +
        '</div>'
      );

      $('.brew-queue .' + brew.data('slug')).click(removeBrew);

      return false;
    }

    function removeBrew () {
      var queue = $('.brew-queue'),
          self = $(this);

      self.remove();

      if (queue.find('.brew') === 0) {
        self.prepend('<div class="getting-started">hi</div>');
      }

      return false;
    }

    $('.add-to-queue').click(addBrew);
    $('.remove-from-queue').click(removeBrew);
  </script>
<% end %>
